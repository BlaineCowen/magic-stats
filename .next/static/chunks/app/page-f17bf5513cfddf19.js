(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2120:(e,s,t)=>{"use strict";t.d(s,{z:()=>l});var r=t(5155),a=t(2115);function n(e){return e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}function l(e){let{data:s}=e,[t,l]=a.useState(null),i=a.useMemo(()=>t?[...s].sort((e,s)=>{let r=e[t.key],a=s[t.key];if(null==r)return 1;if(null==a)return -1;if("number"==typeof r&&"number"==typeof a)return"asc"===t.direction?r-a:a-r;let n=String(r).toLowerCase(),l=String(a).toLowerCase();return"asc"===t.direction?n.localeCompare(l):l.localeCompare(n)}):s,[s,t]),o=e=>{l(s=>(null==s?void 0:s.key)===e?{key:e,direction:"asc"===s.direction?"desc":"asc"}:{key:e,direction:"asc"})};if(0===s.length)return(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsx)("table",{className:"min-w-full",children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"h-24 text-center text-gray-500",children:"No results."})})})})});let c=Object.keys(s[0]);return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"max-h-96 overflow-auto rounded-md border",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"sticky top-0 z-10 bg-gray-50",children:(0,r.jsx)("tr",{children:c.map(e=>(0,r.jsx)("th",{className:"cursor-pointer px-3 py-2 text-left text-xs font-medium tracking-wider text-gray-500 uppercase transition-colors hover:bg-gray-100 sm:px-6 sm:py-3",onClick:()=>o(e),children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:n(e)}),(0,r.jsx)("span",{className:"sm:hidden",children:n(e).split(" ")[0]}),(null==t?void 0:t.key)===e&&(0,r.jsx)("span",{className:"text-gray-400",children:"asc"===t.direction?"\uD83D\uDD3C":"\uD83D\uDD3D"})]})},e))})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:i.map((e,s)=>(0,r.jsx)("tr",{className:"hover:bg-gray-50",children:c.map(s=>{var t;return(0,r.jsx)("td",{className:"px-3 py-2 text-xs whitespace-nowrap text-gray-900 sm:px-6 sm:py-4 sm:text-sm",children:function(e){if(null==e)return"N/A";if("boolean"==typeof e)return e?"Yes":"No";if("number"==typeof e&&!Number.isInteger(e))return e.toFixed(2);return e.toString()}(null!=(t=e[s])?t:null)},s)})},s))})]})})})}},3386:(e,s,t)=>{Promise.resolve().then(t.bind(t,3792))},3792:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(5155),a=t(2115),n=t(3568),l=t(2120);function i(e){return e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()}function o(){let[e,s]=(0,a.useState)(""),[t,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,b]=(0,a.useState)(""),[y,g]=(0,a.useState)(!1),j=async s=>{s.preventDefault(),x(!0),b(""),d(""),g(!1);try{var t,r,a,n,l;let s=await fetch("/api/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),i=await s.json();if(!s.ok)throw d(null!=(t=i.r_code)?t:""),g(!0),Error(null!=(r=i.error)?r:"Failed to fetch results");o(null!=(a=i.results)?a:[]),d(null!=(n=i.r_code)?n:""),u(null!=(l=i.note)?l:""),g(!0)}catch(e){b(e instanceof Error?e.message:"Failed to fetch results"),g(!0)}finally{x(!1)}},f=async()=>{let s="User Query: ".concat(e,"\n\nR Code Generated: ").concat(c,"\n\nNo results were returned. Please help debug this query.");try{await navigator.clipboard.writeText(s)}catch(e){console.error("Failed to copy to clipboard:",e)}},w=async e=>{try{await navigator.clipboard.writeText(e),n.Ay.success("Example query copied to clipboard!")}catch(e){console.error("Failed to copy to clipboard:",e),n.Ay.error("Failed to copy to clipboard")}};return(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mx-auto max-w-3xl",children:[(0,r.jsx)("h1",{className:"mb-8 text-center text-2xl font-bold text-gray-900 sm:text-4xl",children:"NFL Stats Query"}),(0,r.jsx)("form",{onSubmit:j,className:"mb-8",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),placeholder:"Ask any question about NFL stats...",className:"flex-1 rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none sm:px-4 sm:text-base"}),(0,r.jsx)("button",{type:"submit",disabled:m||!e.trim(),className:"flex items-center gap-1 rounded-lg bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-700 disabled:bg-blue-400 sm:gap-2 sm:px-4 sm:text-base",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Executing..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Execute"})]})})]})}),p&&(0,r.jsx)("div",{className:"mb-6 rounded-lg bg-red-50 p-4 text-red-700",children:p}),t.length>0&&(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm sm:p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 sm:text-xl",children:"Results"}),(0,r.jsxs)("button",{onClick:()=>{if(0===t.length)return;let e=Object.keys(t[0]),s=new Blob([[e.map(i).join(","),...t.map(s=>e.map(e=>{let t=s[e],r=function(e){if(null==e)return"N/A";if("boolean"==typeof e)return e?"Yes":"No";if("number"==typeof e&&!Number.isInteger(e))return e.toFixed(2);return e.toString()}(null!=t?t:null);return r.includes(",")||r.includes('"')||r.includes("\n")?'"'.concat(r.replace(/"/g,'""'),'"'):r}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a),r.setAttribute("download","nfl_stats_results.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),n.Ay.success("CSV downloaded successfully!")},className:"flex items-center gap-1 rounded bg-green-600 px-2 py-1 text-xs font-medium text-white transition-colors hover:bg-green-700 sm:gap-2 sm:px-3 sm:py-2 sm:text-sm",title:"Download as CSV",children:[(0,r.jsx)("svg",{className:"h-3 w-3 sm:h-4 sm:w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Download CSV"})]})]}),(0,r.jsx)(l.z,{data:t})]}),!m&&0===t.length&&e&&y&&(0,r.jsxs)("div",{className:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 sm:p-6",children:[(0,r.jsx)("h3",{className:"mb-4 text-base font-semibold text-yellow-800 sm:text-lg",children:"No Results Found"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-medium text-yellow-700 sm:text-base",children:"User Query:"}),(0,r.jsx)("p",{className:"rounded bg-yellow-100 p-2 text-sm text-yellow-800 sm:p-3 sm:text-base",children:e})]}),c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-medium text-yellow-700 sm:text-base",children:"R Code Generated:"}),(0,r.jsx)("pre",{className:"overflow-x-auto rounded bg-yellow-100 p-2 text-xs whitespace-pre-wrap text-yellow-800 sm:p-3 sm:text-sm",children:c})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 pt-2 sm:flex-row sm:gap-3",children:[(0,r.jsxs)("button",{onClick:f,className:"flex items-center justify-center gap-1 rounded bg-yellow-600 px-3 py-2 text-sm text-white transition-colors hover:bg-yellow-700 sm:gap-2 sm:px-4",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Debug Info"]}),(0,r.jsxs)("button",{onClick:()=>{let s=encodeURIComponent("NFL Stats Query Debug - No Results"),t=encodeURIComponent("User Query: ".concat(e,"\n\nR Code Generated: ").concat(c,"\n\nNo results were returned. Please help debug this query."));window.open("mailto:blaine.cowen@gmail.com?subject=".concat(s,"&body=").concat(t))},className:"flex items-center justify-center gap-1 rounded bg-blue-600 px-3 py-2 text-sm text-white transition-colors hover:bg-blue-700 sm:gap-2 sm:px-4",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email Debug Info"]})]})]})]}),!e&&(0,r.jsxs)("div",{className:"rounded-lg bg-blue-50 p-4 text-blue-700 sm:p-6",children:[(0,r.jsx)("h2",{className:"mb-2 text-base font-semibold sm:text-lg",children:"Example queries:"}),(0,r.jsxs)("ul",{className:"space-y-2 sm:space-y-3",children:[(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"Show me the top 10 quarterbacks in 2024 with at least 200 attempts, ranked by passing EPA per attempt"}),(0,r.jsx)("button",{onClick:()=>w("Show me the top 10 quarterbacks in 2024 with at least 200 attempts, ranked by passing EPA per attempt"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"Find receivers in 2024 who had at least 50 targets and show their air yards share, target share, and yards per target"}),(0,r.jsx)("button",{onClick:()=>w("Find receivers in 2024 who had at least 50 targets and show their air yards share, target share, and yards per target"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"Show me running backs in 2024 with at least 100 carries, ranked by rushing EPA per carry, and include their total rushing yards"}),(0,r.jsx)("button",{onClick:()=>w("Show me running backs in 2024 with at least 100 carries, ranked by rushing EPA per carry, and include their total rushing yards"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"List the top 15 players in PPR fantasy points in 2024, but only include players who played at least 10 games"}),(0,r.jsx)("button",{onClick:()=>w("List the top 15 players in PPR fantasy points in 2024, but only include players who played at least 10 games"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"Show me receivers in 2024 with at least 30 targets, ranked by WOPR (weighted opportunity rating), and include their RACR and receiving EPA"}),(0,r.jsx)("button",{onClick:()=>w("Show me receivers in 2024 with at least 30 targets, ranked by WOPR (weighted opportunity rating), and include their RACR and receiving EPA"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),(0,r.jsxs)("li",{className:"flex items-start justify-between gap-3",children:[(0,r.jsx)("span",{className:"flex-1",children:"Show me CJ Stroud's top 10 passes by air yards in 2024"}),(0,r.jsx)("button",{onClick:()=>w("Show me CJ Stroud's top 10 passes by air yards in 2024"),className:"flex-shrink-0 rounded bg-blue-600 p-2 text-white transition-colors hover:bg-blue-700",title:"Copy query",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]}),(0,r.jsx)(n.l$,{position:"bottom-center"})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[568,441,684,358],()=>s(3386)),_N_E=e.O()}]);